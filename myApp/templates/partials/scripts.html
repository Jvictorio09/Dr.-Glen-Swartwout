    <script>
        // Smooth scroll for anchor links (single-theme site)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Fade-in + stagger reveal on scroll
        const observerOptions = { threshold: 0.12, rootMargin: '0px 0px -80px 0px' };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const el = entry.target;
                    // reveal this element
                    el.classList.remove('opacity-0', 'translate-y-6');
                    el.classList.add('animate-fade-in');

                    // stagger internal visual groups if present
                    try {
                        const children = el.querySelectorAll && el.querySelectorAll('.glass-card, .stat-card, .quote-card, .story-card');
                        if (children && children.length) {
                            children.forEach((c, i) => {
                                c.classList.remove('opacity-0', 'translate-y-6');
                                c.style.animationDelay = `${i * 80}ms`;
                                c.classList.add('animate-fade-in');
                            });
                        }
                    } catch (e) {
                        // ignore
                    }

                    observer.unobserve(el);
                }
            });
        }, observerOptions);

        // Observe sections and cards for reveal
        document.querySelectorAll('section, .glass-card, .quote-card, .hover-lift, .stat-card, .story-card').forEach(el => {
            // start hidden state for Tailwind animation (these utility classes exist in config)
            el.classList.add('opacity-0', 'translate-y-6');
            observer.observe(el);
        });

        /* ===== The Difference Carousel ===== */
        const carouselData = [
            {
                frustrationTitle: 'Told it\'s "irreversible"',
                frustrationBody: 'Prognosis of permanent damage, loss, decline. Medicine says "nothing can be done."',
                paradigmTitle: '40+ years proving it\'s reversible',
                paradigmBody: 'Documented cases of "irreversible" conditions reversed. Biological aging reversed. Your body\'s intelligence is deeper than you\'ve been told.'
            },
            {
                frustrationTitle: 'Symptoms suppressed',
                frustrationBody: 'Drugs mask effects. Causes pushed deeper. Band-aids on the real problem.',
                paradigmTitle: 'Symptoms as intelligent healing signals',
                paradigmBody: 'Your body is talking. We listen. Symptoms point to what\'s missing, not what\'s wrong. Supply that, healing follows.'
            },
            {
                frustrationTitle: 'Treatments cause damage',
                frustrationBody: 'Side effects, dependencies, new problems. Toxins accumulate. Coherence drops further.',
                paradigmTitle: 'Natural materials, energies, information',
                paradigmBody: 'Handcrafted formulations from nature. Biofield harmonization. Support healing, not suppress it.'
            },
            {
                frustrationTitle: 'Generic protocols',
                frustrationBody: 'One-size-fits-all treatments. Your uniqueness ignored. Mediocre results.',
                paradigmTitle: 'Biofield Analysis precision',
                paradigmBody: '10-second voice scan reads your epigenetic signature. 150+ formulations matched to YOUR body\'s specific needs. Personalization at scale.'
            },
            {
                frustrationTitle: 'Supplement cabinet chaos',
                frustrationBody: 'Dozens of pills. Guessing. Expensive. No coherence. No guidance.',
                paradigmTitle: 'Targeted, concentrated formulations',
                paradigmBody: '2–5 precise remedies. Monthly updates. No guesswork. Coherence-driven. Healing accelerates with each cycle.'
            },
            {
                frustrationTitle: 'No one listens',
                frustrationBody: 'You\'re a diagnosis code. Your story, ignored. Your intelligence, dismissed.',
                paradigmTitle: 'Medical empath biocommunication',
                paradigmBody: 'I listen. Your body\'s story is heard. Biocommunication guides every remedy. You\'re seen as the intelligent being you are.'
            },
            {
                frustrationTitle: 'Years lost',
                frustrationBody: 'Slow protocols. Plateau. Frustration. Vision, mobility, life quality fade.',
                paradigmTitle: 'Accelerated healing: 12× faster',
                paradigmBody: 'Up to one year of functional gains every 30 days. Months of progress in weeks. Your future is closer than you think.'
            },
            {
                frustrationTitle: '"Nothing can be done"',
                frustrationBody: 'Surrender. Decline accepted as inevitable.',
                paradigmTitle: 'You have your own paradigm',
                paradigmBody: 'Your body, your intelligence, your rules. "Irreversible" is yesterday\'s belief. Today, you heal.'
            }
        ];

        let currentCarouselIndex = 0;

        function renderCarouselContent(index) {
            const data = carouselData[index];
            const contentEl = document.getElementById('carouselContent');
            
            // Generate stepper row HTML
            let stepperHTML = '<div class="carousel-stepper">';
            carouselData.forEach((_, idx) => {
                const isActive = idx === currentCarouselIndex ? 'active' : '';
                stepperHTML += `<button class="stepper-step ${isActive}" data-step="${idx}" aria-label="Go to pair ${idx + 1}">${String(idx + 1).padStart(2, '0')}</button>`;
            });
            stepperHTML += '</div>';
            
            contentEl.innerHTML = `
                <div class="carousel-chip"><i class="fas fa-times text-red-500"></i> Common Frustrations</div>
                <h3 class="carousel-title text-xl md:text-2xl">${data.frustrationTitle}</h3>
                <p class="carousel-desc text-base md:text-lg leading-relaxed">${data.frustrationBody}</p>
                <div class="carousel-divider"></div>
                <div class="carousel-chip"><i class="fas fa-check text-green-500"></i> Dr. Glen's Paradigm</div>
                <h3 class="carousel-title text-xl md:text-2xl">${data.paradigmTitle}</h3>
                <p class="carousel-desc text-base md:text-lg leading-relaxed">${data.paradigmBody}</p>
                ${stepperHTML}
            `;
            
            // Attach click handlers to stepper buttons
            contentEl.querySelectorAll('.stepper-step').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const stepIdx = parseInt(e.currentTarget.getAttribute('data-step'));
                    goToSlide(stepIdx);
                });
            });
            
            contentEl.classList.remove('entering');
            contentEl.classList.add('entering');
            setTimeout(() => contentEl.classList.remove('entering'), 400);
        }

        function goToSlide(index) {
            if (index < 0 || index >= carouselData.length) return;
            currentCarouselIndex = index;
            renderCarouselContent(index);
            updateArrowStates();
        }

        function nextSlide() { goToSlide(currentCarouselIndex + 1); }
        function prevSlide() { goToSlide(currentCarouselIndex - 1); }

        function updateArrowStates() {
            const prevBtn = document.getElementById('carouselPrev');
            const nextBtn = document.getElementById('carouselNext');
            prevBtn.disabled = currentCarouselIndex === 0;
            nextBtn.disabled = currentCarouselIndex === carouselData.length - 1;
        }

        // Event listeners
        document.getElementById('carouselPrev').addEventListener('click', prevSlide);
        document.getElementById('carouselNext').addEventListener('click', nextSlide);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') prevSlide();
            if (e.key === 'ArrowRight') nextSlide();
        });

        // Swipe detection
        let touchStartX = 0;
        const carouselEl = document.getElementById('differencesCarousel');
        if (carouselEl) {
            carouselEl.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; });
            carouselEl.addEventListener('touchend', (e) => {
                const touchEndX = e.changedTouches[0].clientX;
                if (touchStartX - touchEndX > 50) nextSlide();
                if (touchEndX - touchStartX > 50) prevSlide();
            });
        }

        // Initialize carousel
        renderCarouselContent(0);
        updateArrowStates();
    </script>

    <!-- Bottom-right fixed widget container: Chatbot + Back-to-top -->
    <div id="bottomWidgets" class="fixed bottom-6 right-6 z-50 flex items-center gap-3">
        <!-- Chatbot launcher (always visible) -->
        <button id="chatbotLauncher" aria-label="Open AI Assistant" class="opacity-0 translate-y-4 scale-95 pointer-events-none bg-white/6 backdrop-blur-md hover:bg-white/8 text-slate-900 p-3 rounded-lg shadow-sm transition-all duration-500 ease-out hover:-translate-y-1 hover:scale-[1.03] hover:shadow-[0_20px_70px_rgba(215,164,90,0.25)] hover:ring-1 hover:ring-amber-200/30 active:scale-95">
            <i class="fas fa-robot"></i>
        </button>

        <!-- Back to top (hidden initially, will animate in) -->
        <button id="backToTopBtn" aria-label="Back to top" class="opacity-0 translate-y-4 scale-95 pointer-events-none bg-white/6 backdrop-blur-md text-slate-900 p-3 rounded-lg shadow-sm transition-all duration-500 ease-out hover:-translate-y-1 hover:scale-[1.03] hover:shadow-[0_20px_70px_rgba(215,164,90,0.25)] hover:ring-1 hover:ring-amber-200/30 active:scale-95">
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>

    <!-- Chatbot panel (hidden by default) -->
    <div id="chatbotPanel" class="fixed bottom-24 right-6 z-40 w-[360px] max-w-[92vw] h-[520px] max-h-[70vh] bg-white/6 backdrop-blur-lg border border-slate-200 rounded-xl overflow-hidden transform translate-y-6 opacity-0 pointer-events-none scale-95 transition-all duration-400 ease-out">
        <div class="flex items-center justify-between p-4 border-b border-slate-200">
            <div class="flex items-center gap-3">
                <i class="fas fa-robot text-green"></i>
                <div class="font-bold text-slate-900">AI Assistant</div>
            </div>
            <button id="chatbotClose" class="text-slate-600 hover:text-slate-900"><i class="fas fa-xmark"></i></button>
        </div>
        <div id="chatMessages" class="p-4 overflow-y-auto h-[calc(100%-128px)] space-y-3 text-sm text-slate-900/90">
            <div class="assistant-message bg-white/4 rounded-md p-3">Hello — I can help you navigate programs, evidence, and next steps.</div>
        </div>
        <div class="p-3 border-t border-slate-200 flex gap-2">
            <input id="chatInput" type="text" placeholder="Ask me a question..." class="flex-1 bg-white/4 placeholder-white/60 text-slate-900 rounded-md p-2 px-3 focus:outline-none" />
            <button id="chatSend" class="bg-green text-navy p-2 rounded-md"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        // Back-to-top and Chatbot behavior
        (function(){
            const backBtn = document.getElementById('backToTopBtn');
            const launcher = document.getElementById('chatbotLauncher');
            const panel = document.getElementById('chatbotPanel');
            const closeBtn = document.getElementById('chatbotClose');
            const chatInput = document.getElementById('chatInput');
            const chatSend = document.getElementById('chatSend');
            const chatMessages = document.getElementById('chatMessages');

            // Show back-to-top after scrolling ~300px with smooth entrance/exit
            function onScroll() {
                if (!backBtn) return;
                if (window.scrollY > 300) {
                    backBtn.classList.remove('opacity-0','translate-y-4','scale-95','pointer-events-none');
                    backBtn.classList.add('opacity-100','translate-y-0','scale-100');
                } else {
                    backBtn.classList.add('opacity-0','translate-y-4','scale-95','pointer-events-none');
                    backBtn.classList.remove('opacity-100','translate-y-0','scale-100');
                }
            }
            window.addEventListener('scroll', onScroll, { passive: true });

            // Animate chatbot launcher in on load
            document.addEventListener('DOMContentLoaded', () => {
                if (launcher) {
                    // slight delay to allow transition
                    setTimeout(() => {
                        launcher.classList.remove('opacity-0','translate-y-4','scale-95','pointer-events-none');
                        launcher.classList.add('opacity-100','translate-y-0','scale-100');
                    }, 80);
                }
            });

            backBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Chatbot open/close with scale and translate transitions
            function openPanel() {
                panel.classList.remove('translate-y-6','opacity-0','pointer-events-none','scale-95');
                panel.classList.add('translate-y-0','opacity-100','scale-100');
                setTimeout(() => chatInput.focus(), 250);
            }
            function closePanel() {
                panel.classList.add('translate-y-6','opacity-0','pointer-events-none','scale-95');
                panel.classList.remove('translate-y-0','opacity-100','scale-100');
            }

            launcher.addEventListener('click', () => {
                if (panel.classList.contains('opacity-100')) closePanel(); else openPanel();
            });

            closeBtn.addEventListener('click', closePanel);

            // ESC closes panel
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closePanel();
            });

            // Chat send logic (dummy)
            function appendMessage(html, cls='user-message'){
                const el = document.createElement('div');
                el.className = cls + ' rounded-md p-3';
                el.innerHTML = html;
                chatMessages.appendChild(el);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            chatSend.addEventListener('click', () => {
                const txt = chatInput.value.trim();
                if (!txt) return;
                appendMessage(txt, 'user-message bg-white/10 text-slate-900');
                chatInput.value = '';
                setTimeout(() => {
                    appendMessage('Thanks — I can help you navigate programs, evidence, and next steps. What would you like to know?', 'assistant-message bg-white/4 text-slate-900');
                }, 700);
            });

            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') { e.preventDefault(); chatSend.click(); }
            });

            // Initialize visibility
            onScroll();
        })();
    </script>

</body>
</html>

